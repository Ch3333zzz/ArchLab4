name: fib_recursive
config: 
  lenient_log: true
source:
  language: lisp
  code: |
    (defun fib (n)
      (if (<= n 1)
          n
          (+ (call fib (- n 1)) (call fib (- n 2)))))

    (print (call fib 6))

input_schedule: []
expect:
  output: '8'
  state: stopped
  error: false
  out_code: !!binary |
    BgAAAAoAAAAAAAAAPAAAACgAAAAoAAAAAAAAAEYAAAAAAAAAAQAAAAEAAQBSAAAAAAAAAFAAAAAAAAAAPAAAAAEAAAAKAAAABAAAAFsAAABoAAAAHwAAAAAAAABQAAAA2AAAAB4AAAAAAAAAUAAAAAAAAAA8AAAAAQAAAAoAAAACAAAAWgAAAAAAAAA8AAAAKAAAACgAAAAAAAAAPAAAAAAAAABQAAAAAAAAADwAAAACAAAACgAAAAIAAABaAAAAAAAAADwAAAAoAAAAKAAAAAEAAABaAAAA4AAAAB4AAAAAAAAAUwAAAAAAAAApAAAA
  out_code_hex: |
    0 - 060000000A000000 - LOAD_IMM 6
    8 - 000000003C000000 - PUSH_IMM 0
    16 - 2800000028000000 - CALL 40
    24 - 0000000046000000 - PRINT
    32 - 0000000001000000 - HALT
    40 - 0100010052000000 - ENTER 65537
    48 - 0000000050000000 - LOAD_LOCAL 0
    56 - 000000003C000000 - PUSH_IMM 0
    64 - 010000000A000000 - LOAD_IMM 1
    72 - 040000005B000000 - CMP_POP 4
    80 - 680000001F000000 - BEQZ 104
    88 - 0000000050000000 - LOAD_LOCAL 0
    96 - D80000001E000000 - JMP 216
    104 - 0000000050000000 - LOAD_LOCAL 0
    112 - 000000003C000000 - PUSH_IMM 0
    120 - 010000000A000000 - LOAD_IMM 1
    128 - 020000005A000000 - BINOP_POP 2
    136 - 000000003C000000 - PUSH_IMM 0
    144 - 2800000028000000 - CALL 40
    152 - 000000003C000000 - PUSH_IMM 0
    160 - 0000000050000000 - LOAD_LOCAL 0
    168 - 000000003C000000 - PUSH_IMM 0
    176 - 020000000A000000 - LOAD_IMM 2
    184 - 020000005A000000 - BINOP_POP 2
    192 - 000000003C000000 - PUSH_IMM 0
    200 - 2800000028000000 - CALL 40
    208 - 010000005A000000 - BINOP_POP 1
    216 - E00000001E000000 - JMP 224
    224 - 0000000053000000 - LEAVE 0
    232 - 0000000029000000 - RET
  out_log: |
    DEBUG root:processor.py:251 Datapath: heap_ptr initialized to word 1084
    DEBUG root:processor.py:720 No more scheduled input and mmio_in_buffer empty -> input closed (EOF)
    DEBUG root:processor.py:1235 PRINT: numeric -> 8
    DEBUG root:processor.py:381 [MMIO OUT] wrote 56 -> char: 8
    DEBUG root:processor.py:829 HALT encountered










